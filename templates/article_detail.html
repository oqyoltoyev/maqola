{% extends "base.html" %}

{% block title %}{{ article.title }} - Pyfot{% endblock %}

{% block extra_head %}
<meta property="og:title" content="{{ article.title }}">
<meta property="og:description" content="{{ article.content[:150] }}...">
{% if article.image_url %}
<meta property="og:image" content="{{ article.image_url }}">
{% endif %}
<meta name="twitter:card" content="summary_large_image">
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <article>
        <!-- Article header -->
        <div class="mb-10">
            <h1 class="text-3xl font-extrabold text-gray-900 sm:text-4xl mb-4">{{ article.title }}</h1>
            <div class="flex items-center text-gray-500 text-sm">
                <span>{{ article.created_at.strftime('%B %d, %Y') }}</span>
                <span class="mx-2">•</span>
                <span>{{ article.views }} Ko'rishlar</span>
            </div>
        </div>

        <!-- Article featured image -->
        {% if article.image_url %}
        <div class="mb-10">
            <img src="{{ article.image_url }}" alt="{{ article.title }}" class="w-full h-auto rounded-lg shadow-md">
        </div>
        {% endif %}

        <!-- Article content -->
        <div class="prose prose-lg max-w-none article-content">
            {{ article.content | safe }}
        </div>

        <!-- Article footer -->
        <div class="mt-12 pt-8 border-t border-gray-200">
            <div class="flex items-center justify-between">
                <div>
                    <h3 class="text-lg font-medium text-gray-900">Maqolalarni uzatish</h3>
                    <div class="flex space-x-4 mt-2">
                        <a href="https://t.me/share/url?url={{ request.url }}&text={{ article.title }}" target="_blank" class="text-gray-400 hover:text-gray-500">
                            <span class="sr-only">Telegram</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M21.543 2.467a2.216 2.216 0 00-2.29-.287L2.67 10.194c-.736.316-.748.984-.132 1.215l4.76 1.855 1.84 5.85c.167.532.64.654 1.02.27l2.586-2.478 4.67 3.64c.86.47 1.496.226 1.716-.797l3.09-14.464c.27-1.263-.4-1.84-1.397-1.918zm-2.92 2.825L7.88 11.82l3.84 1.56 6.9-6.277z"></path>
                            </svg>
                        </a>                        
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.url }}" target="_blank" class="text-gray-400 hover:text-gray-500">
                            <span class="sr-only">Facebook</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path>
                            </svg>
                        </a>
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.url }}&title={{ article.title }}" target="_blank" class="text-gray-400 hover:text-gray-500">
                            <span class="sr-only">LinkedIn</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19.7,3H4.3C3.582,3,3,3.582,3,4.3v15.4C3,20.418,3.582,21,4.3,21h15.4c0.718,0,1.3-0.582,1.3-1.3V4.3 C21,3.582,20.418,3,19.7,3z M8.339,18.338H5.667v-8.59h2.672V18.338z M7.004,8.574c-0.857,0-1.549-0.694-1.549-1.548 c0-0.855,0.691-1.548,1.549-1.548c0.854,0,1.547,0.694,1.547,1.548C8.551,7.881,7.858,8.574,7.004,8.574z M18.339,18.338h-2.669 v-4.177c0-0.996-0.017-2.278-1.387-2.278c-1.389,0-1.601,1.086-1.601,2.206v4.249h-2.667v-8.59h2.559v1.174h0.037 c0.356-0.675,1.227-1.387,2.526-1.387c2.703,0,3.203,1.779,3.203,4.092V18.338z"></path>
                            </svg>
                        </a>
                    </div>
                </div>
                <a href="/articles" class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    Maqolalarga qaytish
                </a>
            </div>
        </div>
    </article>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Estimated reading time calculation
    document.addEventListener('DOMContentLoaded', function() {
        const content = document.querySelector('.article-content');
        if (content) {
            const text = content.textContent;
            const wordCount = text.split(/\s+/).length;
            const readingTime = Math.ceil(wordCount / 200); // Assuming 200 words per minute reading speed
            
            const timeElement = document.createElement('span');
            timeElement.textContent = `${readingTime} min read`;
            timeElement.classList.add('ml-2');
            
            const metaInfo = document.querySelector('.flex.items-center.text-gray-500');
            if (metaInfo) {
                const separator = document.createElement('span');
                separator.textContent = '•';
                separator.classList.add('mx-2');
                
                metaInfo.appendChild(separator);
                metaInfo.appendChild(timeElement);
            }
        }
    });
</script>
{% endblock %}
